<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de QR Code</title>
</head>
<body>
    <div style="text-align: center; padding: 20px;">
        <h1>Gerador de QR Code</h1>
        
        <div style="margin: 20px 0;">
            <input 
                type="text" 
                id="textInput" 
                placeholder="Digite o texto ou URL..." 
                style="padding: 10px; width: 300px; font-size: 16px;"
            >
            <button 
                onclick="generateQRCode()" 
                style="padding: 10px 20px; font-size: 16px; margin-left: 10px;"
            >
                Gerar QR Code
            </button>
        </div>

        <div style="margin: 20px 0;">
            <button 
                onclick="clearQRCode()" 
                style="padding: 8px 16px; font-size: 14px; background-color: #ff4444; color: white; border: none;"
            >
                Limpar
            </button>
        </div>

        <div id="qrcodeContainer" style="margin: 20px auto; display: inline-block;"></div>
        
        <div id="status" style="margin-top: 20px; font-size: 14px; color: #666;"></div>
    </div>

    <script type="module">
        import QRCode from './QRCode.mjs';

        window.generateQRCode = function() {
            const input = document.getElementById('textInput');
            const container = document.getElementById('qrcodeContainer');
            const status = document.getElementById('status');
            
            const text = input.value.trim();
            
            if (!text) {
                status.textContent = 'Por favor, digite algum texto ou URL.';
                status.style.color = '#ff4444';
                return;
            }

            try {
                // Limpar QR Code anterior
                while (container.firstChild) {
                    container.removeChild(container.firstChild);
                }

                // Gerar novo QR Code
                const qr = new QRCode(container, {
                    text: text,
                    width: 200,
                    height: 200,
                    colorDark: '#000000',
                    colorLight: '#ffffff',
                    correctLevel: QRCode.CorrectLevel.H
                });

                status.textContent = `QR Code gerado com sucesso! (${text.length} caracteres)`;
                status.style.color = '#00aa00';

            } catch (error) {
                status.textContent = `Erro ao gerar QR Code: ${error.message}`;
                status.style.color = '#ff4444';
                console.error('Erro:', error);
            }
        };

        window.clearQRCode = function() {
            const container = document.getElementById('qrcodeContainer');
            const status = document.getElementById('status');
            const input = document.getElementById('textInput');
            
            // Limpar container
            while (container.firstChild) {
                container.removeChild(container.firstChild);
            }
            
            // Limpar status
            status.textContent = '';
            
            // Limpar input
            input.value = '';
            input.focus();
        };

        // Gerar QR Code ao pressionar Enter
        document.getElementById('textInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                generateQRCode();
            }
        });

        // Focar no input ao carregar a p√°gina
        document.getElementById('textInput').focus();
    </script>
</body>
</html>